---
title: å‘å¸ƒä¸€ä¸ªnpmåŒ…ä½ éœ€è¦çŸ¥é“çš„npmå‘½ä»¤è¯¦è§£
categories: WEBå‰ç«¯
copyright: true
date: 2020-10-16 10:45:30
tags:
  - npm
---
## èƒŒæ™¯

åœ¨å‰ç«¯å·¥ä½œä¸­ï¼Œnpmæ˜¯å¤§å®¶åœ¨ç†Ÿæ‚‰ä¸è¿‡çš„äº†ã€‚å¤§å®¶å¤šå¤šå°‘å°‘éƒ½ä¼šç”¨åˆ°npmåŒ…æ¥åŠ å¿«æˆ‘ä»¬çš„ä¸šåŠ¡å¼€å‘ã€‚å¯¹äºä¸€ä¸ªæœ‰æ¢¦æƒ³çš„å’¸é±¼æ¥è¯´ï¼Œæœ‰æ—¶å€™ä¹Ÿæƒ³è‡ªå·±å‘å¸ƒä¸€ä¸ªåŒ…ã€‚è¿™é‡Œå°±åˆ†äº«ä¸‹å‘å¸ƒä¸€ä¸ªåŒ…éœ€è¦ä½¿ç”¨åˆ°çš„npmå‘½ä»¤å’Œå‘å¸ƒæµç¨‹<!--more-->

## å‡†å¤‡

é¦–å…ˆéœ€è¦å»[npmå®˜ç½‘](https://www.npmjs.com/)æ³¨å†Œè‡ªå·±çš„è´¦å·ï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°ç”¨æˆ·åã€é‚®ç®±ã€å¯†ç ã€‚è¿™é‡Œçš„ç”¨æˆ·åå°±æ˜¯ä½ å‘å¸ƒçš„åŒ…æ‰€å±çš„ä½œç”¨åŸŸï¼Œé‚®ç®±æ˜¯ç»™ä½ å‘é€šçŸ¥ç”¨çš„ã€‚è¿™äº›éƒ½æå®šåï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å‘å‡†å¤‡å‘å¸ƒçš„åŒ…äº†

## å‘å¸ƒ

### è§„èŒƒ

>npmå®˜æ–¹å»ºè®®è§„èŒƒçš„åŒ…**è‡³å°‘**åŒ…å«ï¼š
>
>- package.jsonï¼ˆåŒ…çš„åŸºæœ¬ä¿¡æ¯ï¼‰
>
>- README.mdï¼ˆæ–‡æ¡£ï¼‰
>
>- index.js ï¼ˆå…¥å£æ–‡ä»¶ï¼‰

### å‘å¸ƒä¸€ä¸ªä¸åœ¨è‡ªå·±ç”¨æˆ·åä½œç”¨åŸŸä¸‹çš„åŒ…

##### å‘å¸ƒ[create-wy-umi](https://www.npmjs.com/package/create-wy-umi)åŒ…

##### åˆ›å»ºé¡¹ç›®

1. åˆ›å»ºæ–‡ä»¶å¤¹

```
mkdir create-wy-umi
cd create-wy-umi
```

2. åˆå§‹åŒ–é¡¹ç›®

```
npm init/npm init -y
```

3. åˆ›å»ºåŒ…çš„å…¥å£æ–‡ä»¶ï¼Œå‡è®¾æ˜¯index.jsï¼Œåˆ™package.jsonæ–‡ä»¶å¦‚ä¸‹

```
{
  "name": "wy-create-umi",
  "version": "1.0.0",
  "description": "my first npm package",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [
    "npm",
    "packge"
  ],
  "author": "wy",
  "license": "ISC"
}
```

4. åˆ›å»ºREADME.md

5. åˆ›å»ºindex.js
6. æœ€åŸºæœ¬çš„ç›®å½•ç»“æ„å¦‚ä¸‹

```
â””â”€â”€ wy-create-umi
    â”œâ”€â”€ README.md
    â”œâ”€â”€ index.js
    â””â”€â”€ package.json
```

##### å¼€å§‹å‘å¸ƒçš„æ­¥éª¤å’Œä½¿ç”¨çš„npmå‘½ä»¤

1. åˆ‡æ¢npmæºä¸ºå®˜ç½‘æºï¼Œå¯ä»¥ä½¿ç”¨nrmè¿›è¡Œç®¡ç†

2. ç™»å½•

```
// è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
npm login
```

3. æµ‹è¯•

```
//åœ¨æœ¬åœ°å…ˆæµ‹è¯•æˆ‘ä»¬çš„åŒ…
npm link
```

è¿™æ ·åœ¨æˆ‘ä»¬é¡¹ç›®é‡Œå°±å¯ä»¥ä½¿ç”¨æˆ‘ä»¬æœ¬åœ°å¼€å‘çš„åŒ…äº†ï¼Œæµ‹è¯•æ²¡æœ‰é—®é¢˜ä¹‹åå°±å¯ä»¥è¿›è¡Œå‘å¸ƒ

4. å¸è½½æ‰æµ‹è¯•åŒ…

```
// å¸è½½æ‰æœ¬åœ°æµ‹è¯•åŒ…
npm unlink
```

5. å‘å¸ƒ

```
// å¦‚æœåŒ…çš„åå­—æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆè¿™ä¸€æ­¥åŸºæœ¬å·²ç»å‘å¸ƒæˆåŠŸä¸€ä¸ªnpmåŒ…äº†
npm publish
```

### å‘å¸ƒä¸€ä¸ªåœ¨è‡ªå·±ç”¨æˆ·åä½œç”¨åŸŸä¸‹çš„åŒ…

åŸºæœ¬çš„å‘å¸ƒæ­¥éª¤å·®ä¸å¤šï¼Œä¸»è¦åŒºåˆ«æ˜¯npmå‘½ä»¤çš„ä¸åŒã€‚

1. åœ¨åˆå§‹åŒ–å’Œå‘å¸ƒçš„æ—¶å€™å‘½ä»¤æ”¹æˆå¦‚ä¸‹å‘½ä»¤

```
// åˆå§‹åŒ–é¡¹ç›®çš„æ—¶å€™
npm init --scope=@wy -y
// å‘å¸ƒé¡¹ç›®çš„æ—¶å€™
npm publish --access public
```

å¦‚æœè¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆå‘å¸ƒçš„æŒ‡å®šä½œç”¨åŸŸä¸‹çš„åŒ…å°±å®Œæˆäº†ï¼Œå‘å¸ƒç»„ç»‡ä¸‹çš„åŒ…ï¼Œä¹Ÿæ˜¯ä½¿ç”¨è¿™æ ·çš„æ–¹æ³•ï¼Œæ¯”å¦‚[@waterpack/wx-cli](https://www.npmjs.com/package/@waterpack/wx-cli)ï¼Œè¿™ä¸ªæ˜¯æˆ‘å‘å¸ƒçš„ç”Ÿæˆå°ç¨‹åºé¡µé¢æˆ–è€…ç»„ä»¶çš„è„šæ‰‹æ¶å·¥å…·ã€‚

è‡³æ­¤æˆ‘ä»¬å·²ç»èƒ½æˆåŠŸå‘å¸ƒä¸€ä¸ªåŒ…äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¯¹æˆ‘ä»¬å‘çš„åŒ…çš„è¿­ä»£æ›´æ–°

### è¿­ä»£å’Œæ›´æ–°

å½“æˆ‘ä»¬éœ€è¦ä¼˜åŒ–æˆ‘ä»¬çš„åŒ…ä»£ç çš„æ—¶å€™ï¼Œå°±éœ€è¦å¯¹å·²ç»å‘å¸ƒçš„åŒ…è¿›è¡Œæ›´æ–°ï¼Œè¿™é‡Œå°±è¯´ä¸‹æ›´æ–°åŒ…çš„æ­¥éª¤å’Œnpmå‘½ä»¤

1. æ›´æ–°æˆ‘ä»¬çš„ä»£ç æ¯”å¦‚`index.js`ä¸­çš„ç±»å®¹
2. æ›´æ–°æˆ‘ä»¬çš„åŒ…ç‰ˆæœ¬

```
// æ›´æ–°ç‰ˆæœ¬çš„å‘½ä»¤ä¸º
npm version <major | minor | patch>

```

| åŒ…                   | ç‰ˆæœ¬å·æ„ä¹‰ | è§„åˆ™                                  | ç‰ˆæœ¬  |
| -------------------- | ---------- | ------------------------------------- | :---- |
| é¦–æ¬¡å‘å¸ƒ             | é¦–å‘       | 1.0.0å¼€å§‹                             | 1.0.0 |
| bugä¿®å¤ï¼Œå‘åå…¼å®¹    | è¡¥ä¸ç‰ˆæœ¬å· | å˜æ›´ç¬¬ä¸‰ä½æ•°å­—                        | 1.0.1 |
| æ–°åŠŸèƒ½ï¼Œå‘åå…¼å®¹     | æ­¤ç‰ˆæœ¬å·   | å˜æ›´ç¬¬äºŒä½æ•°å­—ï¼Œä¸”ç¬¬ä¸‰ä½æ•°å­—æ”¹ä¸º0     | 1.1.0 |
| é‡å¤§å˜æ›´ï¼Œä¸å‘åå…¼å®¹ | ä¸»ç‰ˆæœ¬å·   | å˜æ›´ç¬¬ä¸€ä½æ•°å­—ï¼Œä¸”ç¬¬äºŒç¬¬ä¸‰ä½æ•°å­—æ”¹ä¸º0 | 2.0.0 |

3. å…³äº`npm version`

```
âœ  npm version --help
npm version [<newversion> | major | minor | patch | premajor | preminor | prepatch | prerelease [--preid=<prerelease-id>] | from-git]
(run in package dir)
'npm -v' or 'npm --version' to print npm version (6.14.7)
'npm view <pkg> version' to view a package's published version
'npm ls' to inspect current package/dependency versions
```

å¯ä»¥çœ‹åˆ°å‘½ä»¤çš„æ‰€æœ‰å‚æ•°ï¼Œè¿™é‡Œè§£é‡Šä¸‹å„ä¸ªå‚æ•°çš„æ„ä¹‰å’Œä½œç”¨

- ##### prerelease

1. `npm version prerelease`
   package.json ä¸­çš„ç‰ˆæœ¬å·`1.0.0`å˜ä¸º `1.0.1-0`
2. å†æ¬¡æ‰§è¡Œ `npm version prerelease`
   package.json ä¸­çš„ç‰ˆæœ¬å·`1.0.1-0`å˜ä¸º `1.0.1-1`

> æ“ä½œè¯´æ˜ å½“æ‰§è¡Œ`npm version prerelease`æ—¶ï¼Œå¦‚æœæ²¡æœ‰é¢„å‘å¸ƒå·ï¼Œåˆ™å¢åŠ è¡¥ä¸ç‰ˆæœ¬å·ï¼ŒåŒæ—¶é¢„å‘å¸ƒå·è®¾ä¸º0ï¼›
> å¦‚æœæœ‰prereleaseï¼Œ åˆ™prerelease å¢åŠ 1ã€‚

- ##### prepatch

1. `npm version prepatch`
   package.json ä¸­çš„ç‰ˆæœ¬å·`1.0.1-1`å˜ä¸º `1.0.2-0`

> prepatch - ç›´æ¥å‡çº§è¡¥ä¸å·ï¼Œå¢åŠ é¢„å‘å¸ƒå·ä¸º0ã€‚

- ##### preminor

1. `npm version preminor`
   package.json ä¸­çš„ç‰ˆæœ¬å·`1.0.2-0`å˜ä¸º `1.1.0-0`

> preminor - ç›´æ¥å‡çº§æ¬¡ç‰ˆæœ¬å·ï¼Œè¡¥ä¸ç‰ˆæœ¬å·ç½®ä¸º0ï¼Œå¢åŠ é¢„å‘å¸ƒå·ä¸º0ã€‚

- ##### premajor

1. `npm version premajor`
   package.json ä¸­çš„ç‰ˆæœ¬å·`1.1.0-0`å˜ä¸º `2.0.0-0`

> premajor - ç›´æ¥å‡çº§ä¸»ç‰ˆæœ¬å·ï¼Œæ¬¡ç‰ˆæœ¬å·ã€è¡¥ä¸ç‰ˆæœ¬å·ç½®ä¸º0ï¼Œå¢åŠ é¢„å‘å¸ƒå·ä¸º0ã€‚

- ##### patch: ä¸»è¦ç›®çš„å‡çº§è¡¥ä¸ç‰ˆæœ¬å·

1. `npm version patch`
   package.json ä¸­çš„ç‰ˆæœ¬å·`2.0.0-0`å˜ä¸º `2.0.0`;
2. å†æ¬¡æ‰§è¡Œ`npm version patch`
   package.json ä¸­çš„ç‰ˆæœ¬å·`2.0.0`å˜ä¸º `2.0.1`;

> æ“ä½œè¯´æ˜ï¼Œpatchï¼šå¦‚æœæœ‰é¢„å‘ç‰ˆæœ¬å· ï¼Œåˆ™å»æ‰ ï¼Œå…¶ä»–ä¿æŒä¸å˜ï¼›
> å¦‚æœæ²¡æœ‰é¢„å‘ç‰ˆæœ¬å· ï¼Œåˆ™å‡çº§è¡¥ä¸ç‰ˆæœ¬å·.

- ##### minorï¼š ä¸»è¦ç›®çš„å‡çº§æ¬¡è¦ç‰ˆæœ¬

1. `npm version minor`
   package.json ä¸­çš„ç‰ˆæœ¬å·`2.0.1`å˜ä¸º `2.1.0`;

> å¦‚æœæ²¡æœ‰é¢„å‘ç‰ˆæœ¬ï¼Œç›´æ¥å‡çº§æ¬¡è¦ç‰ˆæœ¬ï¼Œ åŒæ—¶è¡¥ä¸ç‰ˆæœ¬è®¾ç½®ä¸º0ï¼›

2. `npm version premajor` `2.1.0`â€“> `3.0.0-0`;

3. `npm version minor` `3.0.0-0`â€“> `3.0.0`;

4. `npm version prepatch` `3.0.0`â€“>`3.0.1-0`;

5. `npm version minor` `3.0.1-0`â€“>`3.1.0`;

> å¦‚æœæœ‰é¢„å‘ç‰ˆæœ¬å·ï¼Œ é¦–å…ˆéœ€è¦å»æ‰ï¼›å¦‚æœè¡¥ä¸ç‰ˆæœ¬å·ä¸º0ï¼Œåˆ™ä¸å‡çº§æ¬¡è¦ç‰ˆæœ¬ï¼šå¦‚`3`ï¼›
> å¦‚æœè¡¥ä¸ç‰ˆæœ¬å·ä¸ä¸º0ï¼Œ åˆ™å‡çº§æ¬¡è¦ç‰ˆæœ¬å·ï¼ŒåŒæ—¶è¡¥ä¸ç‰ˆæœ¬å·è®¾ä¸º0ï¼Œå¦‚`5`ã€‚

- ##### major ï¼šä¸»è¦ç›®çš„å‡çº§ä¸»ç‰ˆæœ¬

1. `npm version major` : `3.1.0` -->`4.0.0`

> å¦‚æœæ²¡æœ‰é¢„å‘ç‰ˆæœ¬å·ï¼Œåˆ™ç›´æ¥å‡çº§ä¸»ç‰ˆæœ¬å·ï¼Œå…¶ä»–ä½éƒ½ç½®ä¸º0ï¼›

2. `npm version premajor`: `4.0.0` --> `5.0.0-0`;

3. `npm version premajor`: `5.0.0-0` --> `5.0.0`;

> å¦‚æœæœ‰é¢„å‘å¸ƒå·ï¼š æ¬¡ç‰ˆæœ¬å·å’Œè¡¥ä¸ç‰ˆæœ¬éƒ½ä¸º0ï¼Œåˆ™ä¸å‡çº§ä¸»ç‰ˆæœ¬ï¼Œåªå°†é¢„å‘ç‰ˆæœ¬å·å»æ‰ã€‚

4. `npm version preminor` : `5.0.0-0`â€“> `5.1.0-0`

5. `npm version major` : `5.1.0-0` -->`6.0.0`

> å¦‚æœæœ‰é¢„å‘å¸ƒå·ï¼šä¸”æ¬¡ç‰ˆæœ¬å·å’Œè¡¥ä¸ç‰ˆæœ¬å·æœ‰ä»»æ„ä¸€ä¸ªä¸æ˜¯0ï¼Œåˆ™å‡çº§ä¸»ç‰ˆæœ¬å·ï¼Œå…¶ä»–ä½éƒ½ç½®ä¸º0ï¼Œå¹¶å»æ‰é¢„å‘ç‰ˆæœ¬ã€‚

##### æ›´æ–°è¿­ä»£å‘å¸ƒ

ç‰ˆæœ¬æ›´æ”¹å®Œæ¯•åï¼Œç›´æ¥æ‰§è¡Œå‘å¸ƒå‘½ä»¤ï¼Œè¿™æ—¶å‘å¸ƒåº”è¯¥å°±æˆåŠŸäº†å¦‚ä¸‹

```
âœ  wx-cli git:(master) npm publish      
npm notice 
npm notice ğŸ“¦  @waterpack/wx-cli@1.0.7
npm notice === Tarball Contents === 
npm notice 8.4kB bin/index.js            
npm notice 215B  template/comp/index.js  
npm notice 850B  template/page/index.js  
npm notice 48B   template/comp/index.json
npm notice 27B   template/page/index.json
npm notice 776B  package.json            
npm notice 2.1kB README.md               
npm notice 68B   template/comp/index.wxml
npm notice 80B   template/page/index.wxml
npm notice 29B   template/comp/index.wxss
npm notice 35B   template/page/index.wxss
npm notice === Tarball Details === 
npm notice name:          @waterpack/wx-cli                       
npm notice version:       1.0.7                                   
npm notice package size:  3.8 kB                                  
npm notice unpacked size: 12.6 kB                                 
npm notice shasum:        6e2389721598375d068ae12852694b1ce8
npm notice integrity:     sha512-agsPUF0J1fU8s[...]DdB8Gb3QVpWxg==
npm notice total files:   11                                      
npm notice 
+ @waterpack/wx-cli@1.0.7
```



## å°ç»“

åˆ°æ­¤ï¼Œå‘å¸ƒä¸€ä¸ªåŒ…çš„è®²è§£ç»“æŸã€‚è§‰å¾—çš„æœ‰å¸®åŠ©çš„å°ä¼™ä¼´æ¬¢è¿ç»™ä¸ªèµï¼ï¼ï¼

